# 事件

## 事件流

事件流描述的是从页面中接收事件的顺序，比如有两个嵌套的div，点击了内层的div，这时候是内层的div先触发click事件还是外层先触发？目前主要有三种模型

1. 事件冒泡：事件开始时由最具体的元素接收，然后逐级向上传播到较为不具体的元素
2. 事件捕获：不太具体的节点更早接收事件，而最具体的元素最后接收事件，和事件冒泡相反
3. DOM事件流：DOM2级事件规定事件流包括三个阶段，事件捕获阶段，处于目标阶段，事件冒泡阶段，首先发生的是事件捕获，为截取事件提供机会，然后是实际目标接收事件，最后是冒泡阶段

这种分歧在日常生活中也很常见，举个例子，某个地方出了抢劫事件，我们有多种处理方式

1. 村里先发现，报告给乡里，乡里报告到县城，县城报告给市里。。。。
2. 市里先知道这事儿，然后交代给县城怎么处理，县城交给到乡里处理，乡里交给村里处理

Opera、Firefox、Chrome、Safari都支持DOM事件流，IE不支持事件流，只支持事件冒泡。

## add 和 on 区别

on是给一个元素添加属性，属性值是一个方法，当再次添加时后面会覆盖前面的

add 时一个方法 方法执行几次都可以 所以可以添加很多事件监听器

## 事件捕获和事件冒泡

是两种响应事件的时机。

1. 在事件冒泡阶段事件到达元素时执行方法
2. 在事件捕获阶段时间到达元素时执行方法

默认是在冒泡阶段，但是给 add 方法设置参数为 true 可以改变时机

## xxx

this 代表响应事件的元素。即add 函数前面的对象

事件可以作为参数传递给回调函数 e.target 和 this 不一定是一样， e.target 代表事件最原始或者说最精确的触发点，也就是我们点击的那个元素



function f1() {
  function f2(){
    console.log(this === window)
}
f2()
}

f1()  // true

不要把作用域和 this 搞混了，作用域是基于词法分析，而 this 不是词法分析，两个完全不一样。

## 事件代理

事件代理的本质就是利用事件冒泡的特性把事件监听器绑定到父元素上

事件代理的应用场景是页面上还有一些新增的元素，而这些元素都是需要绑定事件的